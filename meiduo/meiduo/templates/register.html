<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <Script Language="JavaScript"> </Script>

	<title>美多商城-注册</title>
	<link rel="stylesheet" type="text/css" href="/static/css/reset.css">
	<link rel="stylesheet" type="text/css" href="/static/css/main.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script type="text/javascript" src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.0"></script>
    <!-- 开发环境版本 -->
    <script type="text/javascript" src="/static/js/vue-2.5.16.js"></script>
    <script type="text/javascript" src="/static/js/axios-0.18.0.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>
<body>
    <div id="app">
	<div class="register_con">
		<div class="l_con fl">
			<a href="index.html" class="reg_logo"><img src="/static/images/logo.png"></a>
			<div class="reg_slogan">商品美 · 种类多 · 欢迎光临</div>
			<div class="reg_banner"></div>
		</div>
		<div class="r_con fr">
			<div class="reg_title clearfix">
				<h1>用户注册</h1>
				<a href="login.html">登录</a>
			</div>
			<div class="reg_form clearfix">
				<form method="post" class="register_form"  v-cloak>
{#                    {{ csrf_token }}#}
                    {{ csrf_input }}
					<ul>
						<li>
							<label>用户名:</label>
							<input type="text" v-model="username" @blur="check_username" name="username" id="user_name">
							<span class="error_tip" v-show="error_name">[[ error_name_message ]]</span>
						</li>
						<li>
							<label>密码:</label>
							<input type="password" v-model="password" @blur="check_password" name="password" id="pwd">
							<span class="error_tip" v-show="error_password">[[ error_password_message ]]</span>
						</li>
						<li>
							<label>确认密码:</label>
							<input type="password" v-model="password2" @blur="check_password2" name="password2" id="cpwd">
							<span class="error_tip" v-show="error_password2">[[error_password2_message]]</span>
						</li>
						<li>
							<label>手机号:</label>
							<input type="text" v-model="mobile" @blur="check_mobile" name="mobile" id="phone">
							<span class="error_tip" v-show="error_mobile">[[ error_mobile_message ]]</span>
						</li>
						<li>
							<label>图形验证码:</label>
							<input type="text" name="image_code" id="pic_code" class="msg_input">
							<img src="../static/images/pic_code.jpg" alt="图形验证码" class="pic_code">
							<span class="error_tip">请填写图形验证码</span>
						</li>
						<li>
							<label>短信验证码:</label>
							<input type="text" name="sms_code" id="msg_code" class="msg_input">
							<a href="javascript:;" class="get_msg_code">获取短信验证码</a>
							<span class="error_tip">请填写短信验证码</span>
						</li>
						<li class="agreement">
							<input type="checkbox" v-model="allow" @change="check_allow" name="allow" id="allow">
							<label>同意”美多商城用户使用协议“</label>
							<span class="error_tip" v-show="error_allow">请勾选用户协议</span>
                            {% if register_error %}
                                <span class="error_tip">{{ register_error }}</span>
                            {% endif %}
						</li>
						<li class="reg_sub">
							<input type="submit"  value="注 册"  >
						</li>
					</ul>
				</form>
			</div>
		</div>
	</div>
	<div class="footer no-mp">
		<div class="foot_link">
			<a href="#">关于我们</a>
			<span>|</span>
			<a href="#">联系我们</a>
			<span>|</span>
			<a href="#">招聘人才</a>
			<span>|</span>
			<a href="#">友情链接</a>
		</div>
		<p>CopyRight © 2016 北京美多商业股份有限公司 All Rights Reserved</p>
		<p>电话：010-****888    京ICP备*******8号</p>
	</div>
    </div>
    <script type="text/javascript" src="/static/js/register.js"></script>
</body>
{#// 我们采用的时ES6的语法#}
{#// 创建Vue对象 vm#}
{#import axios from 'axios'#}
{#<script type="text/javascript" >#}
{#<script  type="text/javascript">#}
{#let vm = new Vue({#}
{#    el: '#app', // 通过ID选择器找到绑定的HTML内容#}
{#    // 修改Vue读取变量的语法#}
{#    delimiters: ['[[', ']]'],#}
{#    data: { // 数据对象#}
{#        // v-model#}
{#        username: '',#}
{#        password: '',#}
{#        password2: '',#}
{#        mobile: '',#}
{#        allow: '',#}
{##}
{#        // v-show#}
{#        error_name: false,#}
{#        error_password: false,#}
{#        error_password2: false,#}
{#        error_mobile: false,#}
{#        error_allow: false,#}
{##}
{#        // error_message#}
{#        error_name_message: '',#}
{#        error_mobile_message: '',#}
{#        error_password_message: '',#}
{#        error_password2_message: '',#}
{##}
{#    },#}
{#    methods: { // 定义和实现事件方法#}
{#        // 校验用户名#}
{#        check_username() {#}
{#            // 用户名是5-20个字符，[a-zA-Z0-9_-]#}
{#            // 定义正则#}
{#            let re = /^[a-zA-Z0-9_-]{5,20}$/;#}
{#            // 使用正则匹配用户名数据#}
{#            if (re.test(this.username)) {#}
{#                // 匹配成功，不展示错误提示信息#}
{#                this.error_name = false;#}
{#            } else {#}
{#                // 匹配失败，展示错误提示信息#}
{#                this.error_name_message = '请输入5-20个字符的用户名';#}
{#                this.error_name = true;#}
{#            }#}
{#        },#}
{#        check_password() {#}
{#            // 用户名是5-20个字符，[a-zA-Z0-9_-]#}
{#            // 定义正则#}
{#            let re = /^[a-zA-Z0-9_-]{8,20}$/;#}
{#            // 使用正则匹配用户名数据#}
{#            if (re.test(this.password)) {#}
{#                // 匹配成功，不展示错误提示信息#}
{#                this.error_password = false;#}
{#            } else {#}
{#                // 匹配失败，展示错误提示信息#}
{#                this.error_password_message = '请输入8-20个字符的密码';#}
{#                this.error_password = true;#}
{#            }#}
{#        },#}
{#        // // 校验密码#}
{#        // check_password() {#}
{#        //     let re = /^[0-9A-Za-z]{8,20}$/;#}
{#        //     if (re.test(this.password)) {#}
{#        //         this.error_password = false;#}
{#        //     } else {#}
{#        //#}
{#        //        this.pwd1 = '请输入5-20个字符的用户名';#}
{#        //        this.error_password = true;#}
{#        //     }#}
{#        // },#}
{#        // 校验确认密码#}
{#        // check_password2() {#}
{#        //     if (this.password == this.password2) {#}
{#        //         this.error_password2 = false;#}
{#        //     } else {#}
{#        //         this.error_password2_message = '请输入相同密码';#}
{#        //         this.error_password2 = true;#}
{#        //     }#}
{#        // },#}
{#        check_password2() {#}
{#            if (this.password != this.password2) {#}
{#                this.error_password2 = true;#}
{#            } else {#}
{#                this.error_password2 = false;#}
{#            }#}
{#        },#}
{#        // 校验手机号#}
{#        check_mobile() {#}
{#            let re = /^1[3-9]\d{9}$/;#}
{#            if (re.test(this.mobile)) {#}
{#                this.error_mobile = false;#}
{#            } else {#}
{#                this.error_mobile_message = '您输入的手机号格式不正确';#}
{#                this.error_mobile = true;#}
{#            }#}
{#        },#}
{#        // 校验是否勾选协议#}
{#        check_allow() {#}
{#            if (!this.allow) {#}
{#                this.error_allow = true;#}
{#            } else {#}
{#                this.error_allow = false;#}
{#            }#}
{#        },#}
{#        // 监听表单提交事件#}
{#        submit_on() {#}
{#            this.check_username();#}
{#            this.check_password();#}
{#            this.check_password2();#}
{#            this.check_mobile();#}
{#            this.check_allow();#}
{##}
{#            // 在校验之后，注册数据中，只要有错误，就禁用掉表单的提交事件#}
{#            if (this.error_name == true || this.error_password == true || this.error_password2 == true || this.mobile == true || this.allow == true) {#}
{#            //     // 禁用掉表单的提交事件#}
{#            window.event.returnValue = false;#}
{#            }#}
{#        },#}
{#    }#}
{#})#}
{#</script>#}
{#</html>#}
